<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="It is quite essential to understand the transactions in order to build robust and reliable applications. In this blog post I’ll be explaining what a transaction is and what key concepts we should keep">
<meta property="og:type" content="article">
<meta property="og:title" content="Essentials of Transactions in PostgreSQL">
<meta property="og:url" content="http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/index.html">
<meta property="og:site_name" content="semih berkay öztürk">
<meta property="og:description" content="It is quite essential to understand the transactions in order to build robust and reliable applications. In this blog post I’ll be explaining what a transaction is and what key concepts we should keep">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-04-22T14:25:00.000Z">
<meta property="article:modified_time" content="2023-08-04T10:14:09.391Z">
<meta property="article:tag" content="transaction">
<meta property="article:tag" content="postgresql">
<meta property="article:tag" content="database">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon-16x16.png">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/android-chrome-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Essentials of Transactions in PostgreSQL</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/bbsemih">Projects</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/04/28/AWS-Cloud-Practitioner-Chronicles-The-Infrastructure/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/01/19/testing-async-code-using-vitest/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&text=Essentials of Transactions in PostgreSQL"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&is_video=false&description=Essentials of Transactions in PostgreSQL"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Essentials of Transactions in PostgreSQL&body=Check out this article: http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&name=Essentials of Transactions in PostgreSQL&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&t=Essentials of Transactions in PostgreSQL"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Transactions"><span class="toc-number">1.</span> <span class="toc-text">Transactions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#An-Example-From-Transfering-Money"><span class="toc-number">2.</span> <span class="toc-text">An Example From Transfering Money</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Opening-Transactions"><span class="toc-number">3.</span> <span class="toc-text">Opening Transactions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Making-Changes-In-Connection-1"><span class="toc-number"></span> <span class="toc-text">Making Changes In Connection #1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-Merge-These-Changes-Into-the-Main-Data-Pool"><span class="toc-number"></span> <span class="toc-text">How to Merge These Changes Into the Main Data Pool?</span></a>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Essentials of Transactions in PostgreSQL
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name"></span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-04-22T14:25:00.000Z" class="dt-published" itemprop="datePublished">2023-04-22</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/database/" rel="tag">database</a>, <a class="p-category" href="/tags/postgresql/" rel="tag">postgresql</a>, <a class="p-category" href="/tags/transaction/" rel="tag">transaction</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>It is quite essential to understand the transactions in order to build robust and reliable applications. In this blog post I’ll be explaining what a transaction is and what key concepts we should keep in mind when using PostgreSQL.</p>
<h2 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h2><p>In almost every database, including Postgres, a transaction refers to a set of database operations that we want to do together. In other words, a transaction is a way to group multiple operations like updates, deletes and inserts, into a single logical unit.</p>
<h2 id="An-Example-From-Transfering-Money"><a href="#An-Example-From-Transfering-Money" class="headerlink" title="An Example From Transfering Money"></a>An Example From Transfering Money</h2><p>Let’s say that we have an “accounts” table where we basically store information about bank accounts, including the customer’s name and balance. In this scenario we will be transfering money from one account to another.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> accounts (</span><br><span class="line">    id SERIAL <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    balance <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> accounts (name, balance)</span><br><span class="line"><span class="keyword">VALUES</span>  (<span class="string">&#x27;Semih&#x27;</span>,<span class="number">200</span>),(<span class="string">&#x27;Gilfoyle&#x27;</span>,<span class="number">200</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Opening-Transactions"><a href="#Opening-Transactions" class="headerlink" title="Opening Transactions"></a>Opening Transactions</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br></pre></td></tr></table></figure>

<p>At the beginning, before opening a transaction let’s say that we do have 3 connections to the database and they all connected to the main data pool. </p>
<p>When we want to open a transaction using the BEGIN keyword, we need to specify which connection we want to use. For example, we might type BEGIN; to open a transaction on the current connection. If we want to open a transaction on a different connection, we would need to switch to it first using the appropriate command. </p>
<p>As soon as we open up a transaction,(let’s say, on connection number 1) we can imagine this process like our database is creating a seperate workspace for that connection. This workspace is isolated from other transactions and is used exclusively for the statements executed within the transaction. No other connections are going to see those changes that we made in that so called seperate workspace.</p>
<h1 id="Making-Changes-In-Connection-1"><a href="#Making-Changes-In-Connection-1" class="headerlink" title="Making Changes In Connection #1"></a>Making Changes In Connection #1</h1><p>In the connection #1 where we opened a transaction earlier, let’s update the first user’s account by reducing its balance and increment the second user’s balance.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> accounts</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Semih&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> accounts</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Gilfoyle&#x27;</span></span><br></pre></td></tr></table></figure>


<p>This is the balance result when we run <code> SELECT * FROM accounts</code> after the updates:</p>
<ul>
<li>Semih’s Balance: 150</li>
<li>Gilfoyle’s Balance: 250</li>
</ul>
<p>But when we switch back to the Connection #2 and run the same query we see that nothing has changed:</p>
<ul>
<li>Semih’s Balance: 200</li>
<li>Gilfoyle’s Balance: 200</li>
</ul>
<h1 id="How-to-Merge-These-Changes-Into-the-Main-Data-Pool"><a href="#How-to-Merge-These-Changes-Into-the-Main-Data-Pool" class="headerlink" title="How to Merge These Changes Into the Main Data Pool?"></a>How to Merge These Changes Into the Main Data Pool?</h1><p>To merge the changes made within a transaction into the main data pool and make them visible to everyone, committing the transaction is necessary. </p>
<p>However, in some cases, rolling back the transaction may be necessary to undo the changes we made and revert the database to its previous state. What’s more, PostgreSQL can also automatically clean up transactions in specific situations, such as when a client disconnects or a server crash occurs. In these cases, any uncommitted transactions will be rolled back to maintain consistency in the database.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a target="_blank" rel="noopener" href="http://github.com/bbsemih">Projects</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Transactions"><span class="toc-number">1.</span> <span class="toc-text">Transactions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#An-Example-From-Transfering-Money"><span class="toc-number">2.</span> <span class="toc-text">An Example From Transfering Money</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Opening-Transactions"><span class="toc-number">3.</span> <span class="toc-text">Opening Transactions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Making-Changes-In-Connection-1"><span class="toc-number"></span> <span class="toc-text">Making Changes In Connection #1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-Merge-These-Changes-Into-the-Main-Data-Pool"><span class="toc-number"></span> <span class="toc-text">How to Merge These Changes Into the Main Data Pool?</span></a>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&text=Essentials of Transactions in PostgreSQL"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&is_video=false&description=Essentials of Transactions in PostgreSQL"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Essentials of Transactions in PostgreSQL&body=Check out this article: http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&title=Essentials of Transactions in PostgreSQL"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&name=Essentials of Transactions in PostgreSQL&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/04/22/Essentials-of-Transactions-in-PostgreSQL/&t=Essentials of Transactions in PostgreSQL"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023
    semih berkay öztürk
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/bbsemih">Projects</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
